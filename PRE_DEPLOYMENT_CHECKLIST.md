# ðŸš€ Pre-Deployment Checklist for Render

## âœ… Repository Preparation
- [ ] All code committed to Git repository
- [ ] Repository pushed to GitHub/GitLab
- [ ] Repository is public or Render has access
- [ ] render.yaml file exists in root directory
- [ ] Environment configuration files created (.env.production)

## âœ… Backend Configuration
- [ ] `backend/package.json` has correct start script
- [ ] `backend/server.js` listens on PORT environment variable
- [ ] All backend dependencies listed in package.json
- [ ] Backend health check endpoint `/health` implemented
- [ ] ConsentHub integration service configured
- [ ] Customer data sync service implemented

## âœ… Frontend Configuration  
- [ ] `package.json` has build script for Vite
- [ ] API service uses VITE_API_BASE_URL environment variable
- [ ] All frontend dependencies listed in package.json
- [ ] Static assets properly configured for production

## âœ… Database Setup
- [ ] MongoDB Atlas cluster created
- [ ] Database user with read/write permissions created
- [ ] IP address whitelist configured (0.0.0.0/0 for all access)
- [ ] Connection string obtained and ready

## âœ… Environment Variables Ready
### Backend Variables (Set in Render Dashboard):
- [ ] `MONGO_URI` - MongoDB Atlas connection string
- [ ] `INTERNAL_API_KEY` - Secure API key for ConsentHub integration  
- [ ] `JWT_SECRET` - 32+ character secret key
- [ ] `SESSION_SECRET` - 32+ character secret key
- [ ] All other variables auto-generated by render.yaml

### Frontend Variables:
- [ ] All VITE_* variables auto-linked to backend service URLs

## âœ… Security Checklist
- [ ] Strong, unique JWT and session secrets
- [ ] Database connection uses authentication
- [ ] API keys are secure and not exposed in code
- [ ] CORS properly configured for production domain
- [ ] Rate limiting enabled for production

## âœ… Testing Prerequisites
- [ ] Local development environment working
- [ ] All integration tests passing
- [ ] ConsentHub services responding correctly
- [ ] Customer registration flow tested end-to-end

## ðŸŽ¯ Deployment Order
1. **Deploy Backend First** - Render will generate backend URL
2. **Deploy Frontend Second** - Will auto-link to backend URL
3. **Configure Database** - Add MongoDB URI to backend env vars
4. **Test Integration** - Verify all services communicate correctly

## ðŸ”§ Common Issues Prevention
- [ ] Node.js version compatibility (check package.json engines)
- [ ] Build commands use `npm ci` instead of `npm install`
- [ ] Static publish path is `./dist` for Vite builds
- [ ] Health check endpoint returns 200 status
- [ ] CORS allows frontend domain access

## ðŸ“‹ Final Verification  
- [ ] Backend service shows "Live" status
- [ ] Frontend service shows "Live" status  
- [ ] Health check URL responds successfully
- [ ] Frontend can communicate with backend API
- [ ] Database connections established
- [ ] ConsentHub integration functional

---
âœ¨ **Ready for Deployment!** All items checked means you're good to go with Render deployment.
